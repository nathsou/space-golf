var R=Object.defineProperty;var T=(s,t,e)=>t in s?R(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var m=(s,t,e)=>(T(s,typeof t!="symbol"?t+"":t,e),e);import{c as b,a as _}from"./vendor.5a1a5111.js";const A=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=e(o);fetch(o.href,n)}};A();const z=(s,t)=>s+Math.random()*(s-t),f=(s,t)=>s+Math.floor(Math.random()*(t-s+1)),B=s=>s[Math.floor(Math.random()*s.length)];class k{constructor(t,e){m(this,"x");m(this,"y");this.x=t,this.y=e}addMut({x:t,y:e}){return this.x+=t,this.y+=e,this}add({x:t,y:e}){return a(this.x+t,this.y+e)}subMut({x:t,y:e}){return this.x-=t,this.y-=e,this}sub({x:t,y:e}){return a(this.x-t,this.y-e)}timesMut(t){return this.x*=t,this.y*=t,this}times(t){return a(this.x*t,this.y*t)}divMut(t){return this.x/=t,this.y/=t,this}div(t){return a(this.x/t,this.y/t)}distSq({x:t,y:e}){return(t-this.x)**2+(e-this.y)**2}dist(t){return Math.sqrt(this.distSq(t))}length(){return Math.sqrt(this.lengthSq())}lengthSq(){return this.x**2+this.y**2}normalize(){return this.div(this.length())}normalizeMut(){return this.divMut(this.length()),this}copy({x:t,y:e}){return this.x=t,this.y=e,this}set(t,e){return this.x=t,this.y=e,this}clone(){return a(this.x,this.y)}dot({x:t,y:e}){return this.x*t+this.y*e}reflectMut(t){return this.subMut(t.times(2*this.dot(t)))}reflect(t){return this.sub(t.times(2*this.dot(t)))}limitMut(t){return this.lengthSq()>t*t?this.normalizeMut().timesMut(t):this}limit(t){return this.lengthSq()>t*t?this.normalize().timesMut(t):this.clone()}}const a=(s,t)=>new k(s,t),u=4,x=s=>s**2*1e9,I=(s,t,e=u)=>{const i=z(0,2*Math.PI);return s.add(a(Math.cos(i),Math.sin(i)).times(t+e))},D=(s=10)=>t=>{for(let e=0;e<s;e++){const i=a(f(0,window.innerWidth),f(0,window.innerHeight)),o=f(10,60),n=t.addEntity([{type:"body",position:i,mass:x(o)},{type:"shape",kind:"circle",color:W(),radius:o},{type:"attractor"}]);e===s-1&&n.add({type:"target",target:I(i,o,0)})}},F=(s=1)=>t=>{const e=t.query("body","shape","attractor");for(let i=0;i<s;i++){const[{position:o},{radius:n}]=B(e);t.addEntity([{type:"body",position:I(o,n),mass:x(u)},{type:"movement",acceleration:a(0,0),velocity:a(0,0),prevPosition:a(1/0,1/0)},{type:"shape",kind:"circle",radius:u,color:w(255,255,255)}])}},U=s=>{const{canvas:t,action:e}=s.resources;t.addEventListener("pointerdown",i=>{e.start.set(i.clientX,i.clientY)}),t.addEventListener("pointermove",i=>{e.start.x<1/0&&e.end.set(i.clientX,i.clientY)}),t.addEventListener("pointerup",()=>{const i=e.start.sub(e.end).times(500).limit(1e5*.6);if(!isNaN(i.x)&&!isNaN(i.y))for(const[{acceleration:o},n]of s.queryIter("movement"))s.hasComponent(n,"active")||s.addComponent(n,{type:"active"}),o.addMut(i);e.start.set(1/0,1/0),e.end.set(1/0,1/0)})},P=2*Math.PI,q=u*2,w=(s,t,e)=>({r:s,g:t,b:e}),W=()=>w(Math.floor(Math.random()*256),Math.floor(Math.random()*256),Math.floor(Math.random()*256)),$=({r:s,g:t,b:e})=>`rgb(${s}, ${t}, ${e})`,C="rgb(0, 13, 36)",G=s=>{const{canvas:t,context:e}=s.resources;e.clearRect(0,0,s.resources.canvas.width,t.height),e.fillStyle=C,e.fillRect(0,0,t.width,t.height)},E=(s,t,e,i)=>{s.beginPath(),s.fillStyle=$(i),s.arc(t.x,t.y,e,0,P),s.closePath(),s.fill()},H=s=>{for(const[{position:t},e]of s.queryIter("body","shape","attractor"))e.kind==="circle"&&E(s.resources.context,t,e.radius,e.color)},K=s=>{for(const[{position:t},e]of s.queryIter("body","shape","movement"))e.kind==="circle"&&E(s.resources.context,t,e.radius,e.color)},X=s=>{const{context:t,action:e}=s.resources;if(e.start.x<1/0){const i=e.start.sub(e.end).times(.5).limit(e.maxLength);for(const[o,{position:n}]of s.queryIter("movement","body"))t.beginPath(),t.strokeStyle="rgb(255, 255, 255)",t.moveTo(n.x,n.y),t.lineTo(n.x+i.x,n.y+i.y),t.closePath(),t.stroke()}},Y=s=>{const{context:t}=s.resources;for(const[{target:e}]of s.queryIter("target"))t.beginPath(),t.fillStyle=C,t.arc(e.x,e.y,q,0,P),t.closePath(),t.fill()},j=b(G,H,Y,K,X),V=(s,t,e,i)=>{const o=s.sub(e),n=1e-5*(i*t/o.lengthSq());return o.normalizeMut().timesMut(n)},N=1/60,J=s=>{const t=s.queryIter("active","movement","body"),e=s.query("attractor","body");for(const[i,{velocity:o,acceleration:n},{position:r,mass:l}]of t){for(const[p,{position:g,mass:c}]of e){const h=V(g,c,r,l);n.addMut(h.div(l))}o.addMut(n.times(N)),r.addMut(o.times(N)),n.set(0,0)}},Q=s=>{const t=s.queryIter("active","movement","body","shape"),e=s.query("attractor","body","shape");for(const[i,{velocity:o,prevPosition:n},{position:r},l,p]of t)for(const[g,{position:c},h,O]of e){const v=l.radius+h.radius;if(r.distSq(c)<=v**2){const M=r.sub(c).normalize(),S=c.add(M.times(v));o.reflectMut(M).timesMut(.8);const y=s.getComponent(O,"target");y&&y.target.distSq(r)<=q**2&&S.copy(y.target),r.copy(S),n.distSq(r)<.3&&s.removeComponent(p,"active");break}}},Z=b(J,Q),d=document.createElement("canvas");d.width=window.innerWidth;d.height=window.innerHeight;const L=d.getContext("2d");if(L===null)throw"could not get canvas 2d context";const tt={canvas:d,context:L,action:{start:a(1/0,1/0),end:a(1/0,1/0),maxLength:150}};_(tt).addStartupSystem(D(10)).addStartupSystem(F(1)).addStartupSystem(U).addSystem(Z).addSystem(j).run();document.body.appendChild(d);
